   Конвертер для миграции клиентов и сотрудников Байкальского банка, база ЕРИБ (версия 1.18)

   Перед запуском конвертера необходимо:
       1) В базе СБОЛ создать view (из папки BaikalViews)
       2) В базе ЕРИБ создать подключение к удаленной базе данных (базе СБОЛ) psiLink (это имя прописано в теле мигратора) либо public, либо только для схемы ЕРИБ

		create public database link PSILINK connect to USER_NAME identified by USER_PASSWORD 
			using '(DESCRIPTION =  (ADDRESS = (PROTOCOL = TCP)(HOST = IP_SERVERA)(PORT = 1521))
				(CONNECT_DATA =
      					(SERVER = DEDICATED)
					(SID = SID_NAME)
				)
			)'	

       3) В схеме ЕРИБ выполнить скрипты init.sql, crypto.sql и utils.sql. (не под system)
       4) Выполняем скрипт converter.pck (это текстовый файл содержащий скрипт на создание заголовка и основного тела пакета с процедурами мигратора)
       5) Проставить настройки конвертера в таблице converter_config (это делается в скрипте start.sql). Т.е. в скрипте start.sql необходимо
		проставить значения переменных:
						-- параметры для настройки конвертора 
						s_suffix VARCHAR2(5) := 'BKL';                   -- суффикс для логина сотрудников, при совпадении  
						schemeEmployer Number :=1;                       -- схема доступа сотрудника имеющего права на блокировк/разблокировку клиентов (ID схемы) 
						schemeClient Number :=5;                         -- схема доступа для клиента (ID схемы)
						convertDelay Number :=5;                         -- задержка между конвертациями (в секундах) 
						countForConverting Number :=50;                  -- по сколько клиентов конвертировать (партия)
						adapter VARCHAR2(64) := 'phiz-gate-cod-bajkal';  -- адаптер (наименование) <Name>
						regionID Number:=1;                              -- регион в профиле клиента (для привязки услуг) (ID)
						defaultDepartment Number:=8255;                  -- подразделение, к которому привязываем сотрудника если не нашли подходящее по ТБ, ОСБ и ВСП (ID)
						billingID Number:=1;                             -- ID билинговой системы для платежей (id IQW)							 

		эти значения при запуске скрипта проставятся в таблицу converter_config автоматом			

       6) Проверить наличие прав на выполнение пакетов: dbms_lock (в базе ЕРИБ), и migration (пакет с процедурами расстановки флагов миграции в базе СБОЛ)
		если прав нет, выполнить под system - ом : 
								- В базе ЕРИБ - grant execute to dbms_lock to user_name
								- В базе СБОЛ - grant execute to shema_name.migration to user_name (user_name того пльзоваделя, для которого создавали View и которого прописывали в Database Link)        		

       7) Для конвертации пробной партии сотрудников/клиентов вручную заполнить набор для конвертации converter_set - id, id_sbol
	      и вызвать нужную хранимую процедуру в скрипте start.sql

              для процедур удаления в список заносятся логины тех клиентов/сотрудников, которых нужно удалить
              для процедур миграции в список заносятся ID клиентов/сотрудников из базы СБОЛ


   Логи храняться в таблицах: converter_clients, converter_employees, converter_log(объщие ошибки) 
	   в описание ошибки входит: Шаг на котором вылетела ошибка и описаник ошибки oracle (код+описание)

   В таблице converter_accessschemes хранится таблица соответствия схем прав сотрудников СБОЛ и ЕРИБ, она создается вручную

   Для остановки конвертера в процессе выполнения в таблице converter_config есть поле STOP
	   если оно выставлено в "1" то ПО ОКОНЧАНИИ конвертации ТЕКУЩЕГО обрабатываемого клиента/сотрудника процесс останавливается

   По окончании миграции сотрудников выполнить скрипт с сохранением результатов в файл, для получения их логинов и паролей:

			select 'Логин:' as TLOGIN, CE.LOGIN, 'Пароль:' as TPASSWORD, CE."PASSWORD", 'Сотрудник:' as TEMPLOYEE, E.FIRST_NAME, E.PATR_NAME, E.SUR_NAME 
				from CONVERTER_EMPLOYEES CE
					inner join EMPLOYEES E on E.LOGIN_ID = CE.ID_ERIB
						where STATE = 'O'
		