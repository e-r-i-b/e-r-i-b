Генерация индексов.

В приложенном ява-файле находится утилита, для генерации sql-скрипта, наподобии ApplyIndexies.sql. 
Генерация происходит следующим образом:
Есть старый файл базы данных (т.е. sql скрипт, из предыдущей ревизии), пусть он называется old.sql
И есть новый файл базы данных (new.sql) (скрипт из текущей ревизии или рабочей копии). Оба файла созданы с помощью PowerDesigner'а.

Задача предоставленной утилиты: найти все создаваемые индексы в обоих файлах, выбрать все те, которые пересоздаются или создаются новые. А также убрать все индексы, которые уже не используются.

После анализа файлов создаются две таблицы oldIndexies и newIndexies, которые содержат всю необходимую информацию для создания индексов.

Ключом в этих таблицах выстапает информация по имени таблицы и всем столбцам, на которые навешивается текщий индекс. По такому ключу можно получить название индекса.

Если в старом и новом файле соществовали индексы для таблицы T со столбцами C1, C2, ..., CN, и имеют различные имена, то в выходной файл попадет фраза alter index OLDNAME rename to NEWINDEX.

Если названия индексов совпадают, то в выходной файл о них не добавляется информация.

Если в старом файле индекс присутствует, а в новом нет, то генерируется инструкция drop index OLDINDEX.

Если в новом файле индекс имеет, то генериуется create index NEWINDEX on T ( C1 asc, C2 asc, ..., CN asc).

Если представленное имя индекса больше 30 символов, то выдается сообщение об ошибке, либо программа пытается разрешить эту проблему следующим образом: старое имя больше 30 символов, а новое нормальное, тогда генерируется create.
В случае, если новое имя больше 30 символов, а старое меньше 30 символов, то генерируется drop. 


Для поиска индексов используется макса:
create [unique] index <name> on <name> ( <name> [asc] {, <name> [asc]} ).
Здесь [] --- необязательный параметр, {} --- повторение 0 или более раз, <name> --- идентификатор.

Внимание!!! Приложение находит различие только в индексах, и только для создания индексов.