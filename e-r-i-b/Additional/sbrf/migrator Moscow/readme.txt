   Конвертер для миграции клиентов и сотрудников Московского и Байкальского банков, база ЕРИБ (версия 1.18)

   Перед запуском конвертера необходимо:
       1) В базе СБОЛ создать view (из папки Views)
       2) В базе ЕРИБ создать подключение к удаленной базе данных (базе СБОЛ) promLink (это имя прописано в теле мигратора) либо public, либо только для схемы ЕРИБ

		create public database link PROMLINK connect to USER_NAME identified by USER_PASSWORD 
			using '(DESCRIPTION =  (ADDRESS = (PROTOCOL = TCP)(HOST = IP_SERVERA)(PORT = 1521))
				(CONNECT_DATA =
      					(SERVER = DEDICATED)
					(SID = SID_NAME)
				)
			)'	

       3) В схеме ЕРИБ выполнить скрипты init.sql, crypto.sql и utils.sql. (не под system)
       4) Выполняем скрипт migratorMoscow.pck (это текстовый файл содержащий скрипт на создание заголовка и основного тела пакета с процедурами мигратора)
       5) Проставить настройки конвертера в таблице converter_config 

							COD_TB	               -- код тербанка для которого прописаны настройки
							SUFFIX                 -- суффикс для логина сотрудников, при совпадении
							SCHEME_ADMIN           -- схема доступа сотрудника имеющего админские права (ID схемы) 
							SCHEME_EMPLOYER        -- схема доступа сотрудника имеющего права на блокировк/разблокировку клиентов (ID схемы) 
							SCHEME_CLIENT_SBOL     -- схема СБОЛ клиента (ID схемы) 
							SCHEME_CLIENT_UDBO     -- схема УДБО клиента (ID схемы) 
							SCHEME_CLIENT_CARD     -- схема Карточного клиента (ID схемы) 
							CONVERTER_DELAY        -- задержка после конвертации партии клиентов  
							COUNT_FOR_CONVERTING   -- кол-во клиентов в партии
							ADAPTER                -- адаптер (наименование)
							REGION_ID              -- регион в профиле клиента (для привязки услуг) (ID)
							DEFAULT_DEPARTMENT     -- подразделение, к которому привязываем сотрудника если не нашли подходящее по ТБ, ОСБ и ВСП (ID)
							BILLING_ID             -- ID билинговой системы для платежей (id IQW)							  
							STOP                   -- признак ручной остановки процесса миграции (0-работаем, 1-останавливаем миграцию)
							RGN_CODE               -- код региона из СБОЛ ЦА к которому относиться тербанк

       6) Проверить наличие прав на выполнение пакетов: dbms_lock, dbms_lob (в базе ЕРИБ), и migration (пакет с процедурами расстановки флагов миграции в базе СБОЛ)
		если прав нет, выполнить под system - ом : 
								- В базе ЕРИБ - grant execute to dbms_lock to user_name
								- В базе ЕРИБ - grant execute to dbms_lob to user_name
								- В базе СБОЛ - grant execute to shema_name.migration to user_name (user_name того пользователя, для которого создавали View и которого прописывали в Database Link)        		

       7) Для конвертации пробной партии сотрудников/клиентов вручную заполнить набор для конвертации converter_set - id, id_sbol
	      и вызвать нужную хранимую процедуру в скрипте start.sql

              для процедур удаления в список заносятся ID клиентов/сотрудников из базы СБОЛ и login_id ЕРИБ тех клиентов/сотрудников, которых нужно удалить
              для процедур миграции в список заносятся ID клиентов/сотрудников из базы СБОЛ

   Логи храняться в таблицах: converter_clients, converter_employees, converter_log(объщие ошибки) 
	   в описание ошибки входит: Шаг на котором вылетела ошибка и описание ошибки oracle (код+описание)

   В таблице converter_accessschemes хранится таблица соответствия схем прав сотрудников СБОЛ и ЕРИБ, она создается вручную

   Для остановки конвертера в процессе выполнения в таблице converter_config есть поле STOP
	   если оно выставлено в "1" то ПО ОКОНЧАНИИ конвертации ТЕКУЩЕГО обрабатываемого клиента/сотрудника процесс останавливается

   По окончании миграции сотрудников выполнить скрипт с сохранением результатов в файл, для получения их логинов и паролей:

			select 'Логин:' as TLOGIN, CE.LOGIN, 'Пароль:' as TPASSWORD, CE."PASSWORD", 'Сотрудник:' as TEMPLOYEE, E.FIRST_NAME, E.PATR_NAME, E.SUR_NAME 
				from CONVERTER_EMPLOYEES CE
					inner join EMPLOYEES E on E.LOGIN_ID = CE.ID_ERIB
						where STATE = 'O'
		