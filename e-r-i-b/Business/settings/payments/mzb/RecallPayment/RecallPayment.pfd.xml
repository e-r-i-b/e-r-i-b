<?xml version="1.0" encoding="windows-1251"?>
<payment-form name="RecallPayment" description="Отзыв перевода"
              xmlns:xsi="http://www.w3.org/2001/XMLSchema-instance"
              xsi:noNamespaceSchemaLocation="../../PaymentForm.xsd">
    <implementation class="com.rssl.phizic.business.documents.RecallDocument"/>
    <sender class="com.rssl.phizic.business.payments.forms.meta.WithdrawBusinessDocumentSender"/>
	<extended-metadata-loader class="com.rssl.phizic.business.forms.RecallPaymentMetadataLoader"/>
	<list-form name="$calculated"/>
	<need-parent value="true"/>
    <fields>
        <field
		        name="documentNumber"
		        description="Номер отзыва"
		        type="string"
		        source="document-number">
        </field>
		<field name="state"
		       source="state"
		       description="Статус платежа"
		       type="string"/>
		<field
				name="documentDate"
				description="Дата отзыва"
				type="date"
				source="document-date">
            <validators>
	            <validator mode="document" class="com.rssl.common.forms.validators.RequiredFieldValidator"/>
		        <validator class="com.rssl.common.forms.validators.DateFieldValidator"/>
	            <validator class="com.rssl.common.forms.validators.DatePeriodFieldValidator">
					<message text="Дата документа должна быть не раньше текущей и не позже 10 дней – срока действия документа."/>
					<parameter name="after">10</parameter>
				</validator>
	        </validators>
        </field>
	    <field
			    name="recalledDocumentNumber"
			    description="Номер отзываемого перевода"
			    type="string"
			    source="extra-parameters/parameter[@name='recalled-document-number']/@value">
        </field>
	    <field
			    name="amountCurrency"
			    description="Валюта"
			    source="extra-parameters/parameter[@name='amount-currency']/@value"
			    type="string"/>
		<field
				name="amount"
				description="Сумма отзываемого перевода"
				source="amount"
				type="money">
		</field>
	    <field
			    name="payerAccountSelect"
			    description="Счет списания"
			    type="account"
			    source="payer-account">
	    </field>
	    <field
			    name="parentId"
			    description="Ссылка на отзываемый платеж"
			    source="extra-parameters/parameter[@name='parent-id']/@value"
			    type="string">
        </field>
	    <field
			    name="recalled-document-form-name"
			    description="Форма отзываемого документа"
			    source="extra-parameters/parameter[@name='recalled-document-form-name']/@value"
			    type="string">
        </field>
    </fields>
	<dictionaries>
		<entity-list name="paymentDescriptors">
            <entity key="InternalPayment">Перевод между счетам клиента</entity>
            <entity key="RurPayment">Перевод рублей РФ</entity>
			<entity key="CardReplenishmentPayment">Пополнение пластиковой карты</entity>
			<entity key="CurrencyPayment">Перевод иностранной валюты</entity>
			<entity key="GoodsAndServicesPayment">Оплата покупок и услуг</entity>
			<entity key="PurchaseSaleCurrencyPayment">Покупка/продажа иностранной валюты</entity>
			<entity key="TaxPayment">Оплата налогов</entity>
        </entity-list>
	</dictionaries>
</payment-form>
