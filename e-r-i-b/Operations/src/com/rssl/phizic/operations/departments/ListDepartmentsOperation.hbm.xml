<?xml version="1.0" encoding="windows-1251"?><!DOCTYPE hibernate-mapping PUBLIC
		"-//Hibernate/Hibernate Mapping DTD 3.0//EN"
		"http://hibernate.sourceforge.net/hibernate-mapping-3.0.dtd">

<hibernate-mapping>
    <resultset name="com.rssl.phizic.operations.departments.ListDepartmentsOperation.GetTreeChildren.resultset">
        <return-scalar column="id" type="long"/>
        <return-scalar column="name" type="string"/>
        <return-scalar column="allowed" type="short"/>
        <return-scalar column="hasChild" type="short"/>
        <return-scalar column="TB"  type="string"/>
        <return-scalar column="OSB" type="string"/>
        <return-scalar column="VSP" type="string"/>
        <!--
        Возвращает доступные для сотрудника депертаменты, с учетом того, что он может не иметь
        доступ к данному департаменту, но имеет доступ к его потомку

        Входные параметры:
        extra_employeeLoginId - id логина сотрудника, в контексте которого осуществляется поиск
        extra_name - название департамента
        extra_parent - id департамента,  у которого ищем потомков
        extra_checkChild - Требуется ли производить подсчет потомков.

        Возвращает следующее:
        id - id департаметна
        name - название департамента
        allowed - имеется ли доступ у сотрудника  к данному департаменту
        hasChild - имеются ли в подразделении "дети"
        TB - ТБ
        OSB - ОСБ
        VSP - ВСП
    -->
    </resultset>

	<sql-query name="com.rssl.phizic.operations.departments.ListDepartmentsOperation.GetTreeChildren"
            resultset-ref="com.rssl.phizic.operations.departments.ListDepartmentsOperation.GetTreeChildren.resultset">
		<!--смотреть ListDepartments/GetTreeChildren.ftl-->
	</sql-query>
</hibernate-mapping>